<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#40E0D0">
<link rel="manifest" href="manifest.json">
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%2340E0D0'/%3E%3Cstop offset='100%25' style='stop-color:%231E90FF'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='100' height='100' rx='20' fill='url(%23g)'/%3E%3Ccircle cx='50' cy='40' r='25' fill='white'/%3E%3Ctext x='50' y='50' text-anchor='middle' font-size='30' font-weight='bold' fill='%231E90FF'%3E‚Ç∫%3C/text%3E%3Crect x='35' y='65' width='6' height='15' fill='white'/%3E%3Crect x='44' y='60' width='6' height='20' fill='white'/%3E%3Crect x='53' y='55' width='6' height='25' fill='white'/%3E%3Crect x='62' y='70' width='6' height='10' fill='white'/%3E%3C/svg%3E">
<link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%2340E0D0'/%3E%3Cstop offset='100%25' style='stop-color:%231E90FF'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='180' height='180' rx='40' fill='url(%23g)'/%3E%3Ccircle cx='90' cy='72' r='45' fill='white'/%3E%3Ctext x='90' y='90' text-anchor='middle' font-size='54' font-weight='bold' fill='%231E90FF'%3E‚Ç∫%3C/text%3E%3Crect x='63' y='117' width='11' height='27' fill='white'/%3E%3Crect x='79' y='108' width='11' height='36' fill='white'/%3E%3Crect x='95' y='99' width='11' height='45' fill='white'/%3E%3Crect x='111' y='126' width='11' height='18' fill='white'/%3E%3C/svg%3E">
<title>üí∞ Paraƒ∞zi</title>
<style>
:root{
--theme-primary:#6366F1;
--theme-primary-dark:#4F46E5;
--theme-success:#10B981;
--theme-danger:#EF4444;
--theme-warning:#F59E0B;
--theme-info:#3B82F6;
--bg:#f1f5f9;
--card:#ffffff;
--text:#0f172a;
--text-dim:#64748b;
--border:#e2e8f0;
}
body.dark{--theme-primary:#818CF8;--bg:#0f172a;--card:#1e293b;--text:#f1f5f9;--text-dim:#94a3b8;--border:#334155}
body.theme-blue{--theme-primary:#3B82F6;--theme-primary-dark:#2563EB}
body.theme-green{--theme-primary:#10B981;--theme-primary-dark:#059669}
body.theme-red{--theme-primary:#EF4444;--theme-primary-dark:#DC2626}
body.theme-purple{--theme-primary:#A855F7;--theme-primary-dark:#9333EA}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',system-ui,sans-serif;background:var(--bg);color:var(--text);transition:all 0.3s;overflow-x:hidden}

/* Splash Screen */
.splash{position:fixed;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg,#40E0D0 0%,#1E90FF 100%);display:flex;align-items:center;justify-content:center;z-index:9999;animation:splashFade 0.5s 2.5s forwards}
.splash-content{text-align:center;animation:splashZoom 0.8s ease-out}
.splash-logo{font-size:120px;margin-bottom:20px;animation:bounce 1s infinite alternate}
.splash-logo-img{width:140px;height:140px;margin:0 auto 20px;animation:bounce 2s infinite}
.splash-logo-img svg{width:100%;height:100%;filter:drop-shadow(0 10px 30px rgba(0,0,0,0.3))}
.splash-title{font-size:48px;font-weight:800;color:#fff;letter-spacing:-1px;margin-bottom:10px;animation:slideUp 0.6s 0.3s both}
.splash-subtitle{font-size:16px;color:rgba(255,255,255,0.8);font-weight:500;animation:slideUp 0.6s 0.5s both}
.splash-loader{width:60px;height:4px;background:rgba(255,255,255,0.3);border-radius:2px;margin:30px auto 0;overflow:hidden;position:relative}
.splash-loader:after{content:'';position:absolute;top:0;left:0;width:30px;height:100%;background:#fff;border-radius:2px;animation:loading 1.5s infinite}
@keyframes splashFade{to{opacity:0;visibility:hidden}}
@keyframes splashZoom{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}
@keyframes bounce{from{transform:translateY(0)}to{transform:translateY(-10px)}}
@keyframes slideUp{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}
@keyframes loading{0%{left:-30px}100%{left:100%}}

.app{opacity:0;animation:appFadeIn 0.5s 2.5s forwards}
@keyframes appFadeIn{to{opacity:1}}

/* Header */
.header{background:linear-gradient(135deg,var(--theme-primary),var(--theme-primary-dark));color:#fff;padding:30px 20px 25px;position:relative;box-shadow:0 4px 20px rgba(0,0,0,0.1)}
.header-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}
.logo{font-size:28px;font-weight:800;display:flex;align-items:center;gap:8px}
.level-badge{background:rgba(255,255,255,0.2);padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;backdrop-filter:blur(10px)}
.header-icons{display:flex;gap:8px}
.icon-btn{background:rgba(255,255,255,0.2);border:none;width:40px;height:40px;border-radius:10px;color:#fff;font-size:18px;cursor:pointer;transition:all 0.2s;backdrop-filter:blur(10px);position:relative}
.icon-btn:active{transform:scale(0.95)}
.badge-dot{position:absolute;top:8px;right:8px;width:8px;height:8px;background:#EF4444;border-radius:50%;border:2px solid #fff}
.balance-card{background:rgba(255,255,255,0.15);border-radius:20px;padding:20px;backdrop-filter:blur(10px)}
.balance-label{font-size:13px;opacity:0.85;margin-bottom:8px}
.balance{font-size:42px;font-weight:800;margin:10px 0;letter-spacing:-1px}
.quick-stats{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin-top:15px}
.stat-item{background:rgba(255,255,255,0.1);padding:12px;border-radius:12px;backdrop-filter:blur(5px);text-align:center}
.stat-label{font-size:11px;opacity:0.85;margin-bottom:4px}
.stat-value{font-size:18px;font-weight:700}

/* Content */
.content{padding:20px;max-width:600px;margin:0 auto;padding-bottom:90px}
.card{background:var(--card);padding:20px;border-radius:16px;margin:15px 0;box-shadow:0 2px 12px rgba(0,0,0,0.08);border:1px solid var(--border);transition:all 0.3s}
.card:active{transform:scale(0.98)}
.card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}
.card-title{font-size:18px;font-weight:700;display:flex;align-items:center;gap:8px}
.card-action{font-size:14px;color:var(--theme-primary);font-weight:600;cursor:pointer}

/* Buttons */
.btn{width:100%;padding:16px;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all 0.2s;position:relative;overflow:hidden}
.btn:active{transform:scale(0.98)}
.btn-primary{background:linear-gradient(135deg,var(--theme-primary),var(--theme-primary-dark));color:#fff;box-shadow:0 4px 12px rgba(99,102,241,0.3)}
.btn-success{background:linear-gradient(135deg,var(--theme-success),#059669);color:#fff}
.btn-danger{background:linear-gradient(135deg,var(--theme-danger),#DC2626);color:#fff}
.btn-warning{background:linear-gradient(135deg,var(--theme-warning),#D97706);color:#fff}
.btn-outline{background:transparent;border:2px solid var(--border);color:var(--text)}

/* Quick Amount Buttons */
.quick-amounts{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin:15px 0}
.quick-btn{padding:12px;background:var(--bg);border:2px solid var(--border);border-radius:10px;font-weight:600;cursor:pointer;transition:all 0.2s;color:var(--text);font-size:14px}
.quick-btn:active{transform:scale(0.95);border-color:var(--theme-primary);background:var(--theme-primary);color:#fff}
.quick-btn.selected{border-color:var(--theme-primary);background:var(--theme-primary);color:#fff}

/* Forms */
input,select,textarea{width:100%;padding:14px;margin:8px 0;border:2px solid var(--border);border-radius:10px;font-size:15px;background:var(--card);color:var(--text);transition:all 0.2s;font-family:inherit}
input:focus,select:focus{outline:none;border-color:var(--theme-primary);box-shadow:0 0 0 4px rgba(99,102,241,0.1)}
label{font-weight:600;display:block;margin-top:12px;font-size:14px}

/* Categories */
.category-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin:15px 0}
.category-btn{padding:14px 10px;background:var(--bg);border:2px solid var(--border);border-radius:12px;text-align:center;cursor:pointer;transition:all 0.2s}
.category-btn:active{transform:scale(0.95)}
.category-btn.selected{border-color:var(--theme-primary);background:var(--theme-primary);color:#fff}
.category-icon{font-size:28px;margin-bottom:6px}
.category-name{font-size:12px;font-weight:600}

/* Transactions */
.transaction{background:var(--bg);padding:16px;border-radius:12px;margin:10px 0;display:flex;align-items:center;gap:12px;transition:all 0.2s;cursor:pointer;border:1px solid transparent;position:relative}
.transaction:active{transform:scale(0.98);border-color:var(--theme-primary)}
.transaction-icon{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px;flex-shrink:0}
.transaction-info{flex:1;min-width:0}
.transaction-name{font-weight:600;font-size:15px;margin-bottom:4px}
.transaction-meta{font-size:13px;color:var(--text-dim)}
.transaction-amount{font-weight:700;font-size:17px;text-align:right}
.income{color:var(--theme-success)}
.expense{color:var(--theme-danger)}

/* Calendar */
.calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:8px;margin:20px 0}
.calendar-day{aspect-ratio:1;display:flex;flex-direction:column;align-items:center;justify-content:center;background:var(--bg);border-radius:10px;cursor:pointer;transition:all 0.2s;border:2px solid transparent;position:relative}
.calendar-day:active{transform:scale(0.95)}
.calendar-day.today{border-color:var(--theme-primary)}
.calendar-day.has-transactions{background:var(--theme-primary);color:#fff}
.day-number{font-size:14px;font-weight:600}
.day-amount{font-size:10px;margin-top:2px;opacity:0.8}

/* Charts */
.chart-container{position:relative;height:240px;margin:20px 0}

/* Achievement Badges */
.achievements{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin:15px 0}
.achievement{background:var(--bg);padding:15px;border-radius:12px;text-align:center;border:2px solid var(--border)}
.achievement.unlocked{border-color:var(--theme-warning);background:linear-gradient(135deg,#FEF3C7,#FDE68A)}
.achievement-icon{font-size:36px;margin-bottom:8px;filter:grayscale(100%)}
.achievement.unlocked .achievement-icon{filter:grayscale(0%);animation:pulse 0.5s}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.1)}}
.achievement-name{font-size:12px;font-weight:600}

/* Progress Bar */
.progress-bar{width:100%;height:12px;background:var(--border);border-radius:6px;overflow:hidden;margin:10px 0;position:relative}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--theme-primary),var(--theme-primary-dark));transition:width 0.5s;border-radius:6px;position:relative}
.progress-fill:after{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.3),transparent);animation:shimmer 2s infinite}
@keyframes shimmer{0%{transform:translateX(-100%)}100%{transform:translateX(100%)}}

/* Theme Selector */
.theme-options{display:grid;grid-template-columns:repeat(5,1fr);gap:10px;margin:15px 0}
.theme-option{width:100%;aspect-ratio:1;border-radius:12px;border:3px solid var(--border);cursor:pointer;transition:all 0.2s;position:relative}
.theme-option:active{transform:scale(0.95)}
.theme-option.selected{border-color:#fff;box-shadow:0 0 0 3px var(--theme-primary)}
.theme-option.selected:after{content:'‚úì';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:24px;color:#fff;font-weight:bold}
.theme-purple{background:linear-gradient(135deg,#A855F7,#9333EA)}
.theme-blue{background:linear-gradient(135deg,#3B82F6,#2563EB)}
.theme-green{background:linear-gradient(135deg,#10B981,#059669)}
.theme-red{background:linear-gradient(135deg,#EF4444,#DC2626)}
.theme-default{background:linear-gradient(135deg,#6366F1,#4F46E5)}

/* Bottom Nav */
.bottom-nav{position:fixed;bottom:0;left:0;right:0;background:var(--card);display:flex;border-top:1px solid var(--border);padding:8px 0;z-index:100;box-shadow:0 -4px 20px rgba(0,0,0,0.08);backdrop-filter:blur(10px)}
.nav-item{flex:1;text-align:center;padding:10px 8px;color:var(--text-dim);font-size:11px;font-weight:600;cursor:pointer;transition:all 0.2s;position:relative}
.nav-item.active{color:var(--theme-primary)}
.nav-item.active:before{content:'';position:absolute;top:0;left:20%;right:20%;height:3px;background:var(--theme-primary);border-radius:0 0 3px 3px}
.nav-icon{font-size:24px;margin-bottom:4px}

/* Modals */
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:1000;align-items:center;justify-content:center;padding:20px;backdrop-filter:blur(5px)}
.modal.show{display:flex;animation:fadeIn 0.3s}
.modal-content{background:var(--card);border-radius:24px;padding:25px;max-width:420px;width:100%;max-height:85vh;overflow-y:auto;box-shadow:0 20px 60px rgba(0,0,0,0.3);animation:slideUp 0.3s}
.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
.modal-title{font-size:22px;font-weight:700}
.close-btn{background:var(--bg);border:none;width:36px;height:36px;border-radius:10px;font-size:20px;cursor:pointer;transition:all 0.2s}
.close-btn:active{transform:scale(0.9)}

/* Notifications */
.notification{position:fixed;top:20px;right:20px;background:var(--card);padding:16px 20px;border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,0.2);z-index:2000;animation:slideInRight 0.3s;max-width:320px;border-left:4px solid var(--theme-primary)}
@keyframes slideInRight{from{transform:translateX(400px);opacity:0}to{transform:translateX(0);opacity:1}}

/* Screens */
.screen{display:none}
.screen.active{display:block;animation:fadeIn 0.3s}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

/* Crypto Ticker */
.crypto-ticker{background:var(--bg);padding:15px;border-radius:12px;margin:15px 0;display:flex;gap:15px;overflow-x:auto}
.crypto-item{min-width:120px;text-align:center;padding:10px;background:var(--card);border-radius:10px}
.crypto-symbol{font-size:12px;color:var(--text-dim);margin-bottom:4px}
.crypto-price{font-size:18px;font-weight:700}
.crypto-change{font-size:12px;margin-top:4px}
.crypto-up{color:var(--theme-success)}
.crypto-down{color:var(--theme-danger)}

/* Login Screen */
.login-screen{position:fixed;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg,#40E0D0 0%,#1E90FF 100%);display:flex;align-items:center;justify-content:center;z-index:10001;padding:20px}
.login-container{width:100%;max-width:400px;text-align:center}
.login-logo{font-size:80px;margin-bottom:20px;animation:bounce 2s infinite}
.login-logo-img{width:100px;height:100px;margin:0 auto 20px;animation:bounce 2s infinite}
.login-logo-img svg{width:100%;height:100%;filter:drop-shadow(0 10px 30px rgba(0,0,0,0.3))}
.login-title{font-size:42px;font-weight:800;color:#fff;margin-bottom:8px;letter-spacing:-1px}
.login-subtitle{font-size:16px;color:rgba(255,255,255,0.8);margin-bottom:40px}
.login-form{background:rgba(255,255,255,0.95);border-radius:24px;padding:30px;backdrop-filter:blur(10px)}
.form-tabs{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:25px}
.form-tab{padding:12px;background:var(--bg);border-radius:10px;font-weight:600;cursor:pointer;transition:all 0.2s;color:var(--text)}
.form-tab.active{background:var(--theme-primary);color:#fff}
.login-inputs{display:flex;flex-direction:column;gap:12px}
.login-input{padding:16px;border:2px solid var(--border);border-radius:12px;font-size:15px;outline:none;transition:all 0.2s}
.login-input:focus{border-color:var(--theme-primary);box-shadow:0 0 0 4px rgba(99,102,241,0.1)}
.login-btn{padding:16px;background:linear-gradient(135deg,var(--theme-primary),var(--theme-primary-dark));color:#fff;border:none;border-radius:12px;font-size:16px;font-weight:700;cursor:pointer;margin-top:10px;transition:all 0.2s}
.login-btn:active{transform:scale(0.98)}
.login-footer{margin-top:20px;padding-top:20px;border-top:1px solid var(--border)}
.login-option{color:var(--theme-primary);font-weight:600;cursor:pointer;font-size:14px}

/* PIN Lock */
.pin-screen{position:fixed;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg,var(--theme-primary),var(--theme-primary-dark));z-index:10000;display:none;align-items:center;justify-content:center}
.pin-screen.show{display:flex}
.pin-container{text-align:center;color:#fff}
.pin-title{font-size:24px;font-weight:700;margin-bottom:30px}
.pin-dots{display:flex;gap:15px;justify-content:center;margin-bottom:40px}
.pin-dot{width:16px;height:16px;border-radius:50%;border:2px solid rgba(255,255,255,0.5);transition:all 0.3s}
.pin-dot.filled{background:#fff;border-color:#fff}
.pin-keypad{display:grid;grid-template-columns:repeat(3,1fr);gap:15px;max-width:280px;margin:0 auto}
.pin-key{width:70px;height:70px;border-radius:50%;background:rgba(255,255,255,0.2);border:none;color:#fff;font-size:24px;font-weight:600;cursor:pointer;transition:all 0.2s;backdrop-filter:blur(10px)}
.pin-key:active{transform:scale(0.95);background:rgba(255,255,255,0.3)}

/* Floating Action Button */
.fab{position:fixed;bottom:90px;right:20px;width:60px;height:60px;background:linear-gradient(135deg,var(--theme-primary),var(--theme-primary-dark));color:#fff;border:none;border-radius:50%;font-size:28px;cursor:pointer;box-shadow:0 8px 24px rgba(0,0,0,0.3);z-index:99;transition:all 0.3s}
.fab:active{transform:scale(0.9)}

/* Streak Badge */
.streak-badge{background:linear-gradient(135deg,#F59E0B,#D97706);color:#fff;padding:8px 16px;border-radius:20px;display:inline-flex;align-items:center;gap:8px;font-weight:700;box-shadow:0 4px 12px rgba(245,158,11,0.3)}

/* Goals */
.goal-card{background:linear-gradient(135deg,#10B981,#059669);color:#fff;padding:20px;border-radius:16px;margin:15px 0;box-shadow:0 8px 24px rgba(16,185,129,0.3)}
.goal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}
.goal-title{font-size:18px;font-weight:700}
.goal-icon{font-size:36px}
.goal-amount{font-size:32px;font-weight:800;margin:10px 0}
.goal-progress{background:rgba(255,255,255,0.2);height:10px;border-radius:5px;overflow:hidden;margin:15px 0}
.goal-fill{background:#fff;height:100%;transition:width 0.5s;border-radius:5px}
.goal-text{font-size:13px;opacity:0.9}

/* Utility */
.text-center{text-align:center}
.mt-1{margin-top:10px}
.mb-1{margin-bottom:10px}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
</style>
</head>
<body>

<!-- Splash Screen -->
<div class="splash">
  <div class="splash-content">
    <div class="splash-logo-img">
      <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#40E0D0;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#1E90FF;stop-opacity:1" />
          </linearGradient>
        </defs>
        <rect width="100" height="100" rx="20" fill="url(#grad1)"/>
        <circle cx="50" cy="40" r="25" fill="white"/>
        <text x="50" y="50" text-anchor="middle" font-size="30" font-weight="bold" fill="#1E90FF">‚Ç∫</text>
        <rect x="35" y="65" width="6" height="15" fill="white"/>
        <rect x="44" y="60" width="6" height="20" fill="white"/>
        <rect x="53" y="55" width="6" height="25" fill="white"/>
        <rect x="62" y="70" width="6" height="10" fill="white"/>
      </svg>
    </div>
    <div class="splash-title">Paraƒ∞zi</div>
    <div class="splash-subtitle">Ki≈üisel Finans Y√∂neticisi MEGA</div>
    <div class="splash-loader"></div>
  </div>
</div>

<!-- Login/Register Screen -->
<div class="login-screen" id="loginScreen">
  <div class="login-container">
    <div class="login-logo-img">
      <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="gradLogin" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#40E0D0;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#1E90FF;stop-opacity:1" />
          </linearGradient>
        </defs>
        <rect width="100" height="100" rx="20" fill="url(#gradLogin)"/>
        <circle cx="50" cy="40" r="25" fill="white"/>
        <text x="50" y="50" text-anchor="middle" font-size="30" font-weight="bold" fill="#1E90FF">‚Ç∫</text>
        <rect x="35" y="65" width="6" height="15" fill="white"/>
        <rect x="44" y="60" width="6" height="20" fill="white"/>
        <rect x="53" y="55" width="6" height="25" fill="white"/>
        <rect x="62" y="70" width="6" height="10" fill="white"/>
      </svg>
    </div>
    <div class="login-title">Paraƒ∞zi</div>
    <div class="login-subtitle">Ki≈üisel Finans Y√∂neticisi</div>
    
    <div class="login-form" id="loginForm">
      <div class="form-tabs">
        <div class="form-tab active" id="loginTab" onclick="switchTab('login')">Giri≈ü Yap</div>
        <div class="form-tab" id="registerTab" onclick="switchTab('register')">Kayƒ±t Ol</div>
      </div>
      
      <div class="login-inputs" id="loginInputs">
        <input type="text" class="login-input" id="loginName" placeholder="üë§ Ad Soyad" style="display:none">
        <input type="email" class="login-input" id="loginEmail" placeholder="‚úâÔ∏è E-posta">
        <input type="password" class="login-input" id="loginPassword" placeholder="üîí ≈ûifre">
        <button class="login-btn" onclick="handleAuth()">Giri≈ü Yap</button>
      </div>
      
      <div class="login-footer">
        <div class="login-option" onclick="skipLogin()">Misafir olarak devam et ‚Üí</div>
      </div>
    </div>
  </div>
</div>

<!-- PIN Lock Screen -->
<div class="pin-screen" id="pinScreen" style="display:none">
  <div class="pin-container">
    <div class="pin-title">PIN Girin</div>
    <div class="pin-dots">
      <div class="pin-dot" id="dot1"></div>
      <div class="pin-dot" id="dot2"></div>
      <div class="pin-dot" id="dot3"></div>
      <div class="pin-dot" id="dot4"></div>
    </div>
    <div class="pin-keypad">
      <button class="pin-key" onclick="pinInput('1')">1</button>
      <button class="pin-key" onclick="pinInput('2')">2</button>
      <button class="pin-key" onclick="pinInput('3')">3</button>
      <button class="pin-key" onclick="pinInput('4')">4</button>
      <button class="pin-key" onclick="pinInput('5')">5</button>
      <button class="pin-key" onclick="pinInput('6')">6</button>
      <button class="pin-key" onclick="pinInput('7')">7</button>
      <button class="pin-key" onclick="pinInput('8')">8</button>
      <button class="pin-key" onclick="pinInput('9')">9</button>
      <button class="pin-key" onclick="pinClear()">‚å´</button>
      <button class="pin-key" onclick="pinInput('0')">0</button>
      <button class="pin-key" onclick="pinCheck()">‚úì</button>
    </div>
  </div>
</div>

<!-- Main App -->
<div class="app">

<!-- Ana Ekran -->
<div id="home" class="screen active">
  <div class="header">
    <div class="header-top">
      <div class="logo">
        <svg width="32" height="32" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" style="display:inline-block;vertical-align:middle;margin-right:8px">
          <defs>
            <linearGradient id="gradHeader" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#40E0D0;stop-opacity:1" />
              <stop offset="100%" style="stop-color:#1E90FF;stop-opacity:1" />
            </linearGradient>
          </defs>
          <rect width="100" height="100" rx="20" fill="url(#gradHeader)"/>
          <circle cx="50" cy="40" r="25" fill="white"/>
          <text x="50" y="50" text-anchor="middle" font-size="30" font-weight="bold" fill="#1E90FF">‚Ç∫</text>
          <rect x="35" y="65" width="6" height="15" fill="white"/>
          <rect x="44" y="60" width="6" height="20" fill="white"/>
          <rect x="53" y="55" width="6" height="25" fill="white"/>
          <rect x="62" y="70" width="6" height="10" fill="white"/>
        </svg>
        Paraƒ∞zi
        <span class="level-badge">‚≠ê Seviye <span id="userLevel">1</span></span>
      </div>
      <div class="header-icons">
        <button class="icon-btn" onclick="showAchievements()">
          üèÜ
          <span class="badge-dot" id="achievementDot" style="display:none"></span>
        </button>
        <button class="icon-btn" onclick="showNotifications()">üîî</button>
        <button class="icon-btn" onclick="showScreen('settings')">‚öôÔ∏è</button>
      </div>
    </div>
    
    <div class="balance-card">
      <div class="balance-label">Toplam Bakiye</div>
      <div class="balance" id="totalBalance">‚Ç∫0</div>
      <div class="quick-stats">
        <div class="stat-item">
          <div class="stat-label">Bu Ay Gelir</div>
          <div class="stat-value income" id="monthIncome">‚Ç∫0</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Bu Ay Gider</div>
          <div class="stat-value expense" id="monthExpense">‚Ç∫0</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">üî• Streak</div>
          <div class="stat-value" id="streakDays">0</div>
        </div>
      </div>
    </div>
  </div>

  <div class="content">
    <!-- AI Insights -->
    <div id="aiInsights"></div>

    <!-- Quick Transaction -->
    <div class="card">
      <div class="card-header">
        <div class="card-title">‚ö° Hƒ±zlƒ± ƒ∞≈ülem</div>
      </div>
      
      <div class="grid-2" style="margin-bottom:15px">
        <button class="btn btn-success" onclick="setTransactionType('income')">üìà Gelir</button>
        <button class="btn btn-danger" onclick="setTransactionType('expense')">üìâ Gider</button>
      </div>
      
      <label>A√ßƒ±klama</label>
      <input type="text" id="qDesc" placeholder="√ñrn: Market alƒ±≈üveri≈üi">
      
      <label>Kategori</label>
      <div class="category-grid" id="categoryGrid"></div>
      
      <label>Hƒ±zlƒ± Tutar</label>
      <div class="quick-amounts">
        <button class="quick-btn" onclick="setQuickAmount(50)">‚Ç∫50</button>
        <button class="quick-btn" onclick="setQuickAmount(100)">‚Ç∫100</button>
        <button class="quick-btn" onclick="setQuickAmount(500)">‚Ç∫500</button>
        <button class="quick-btn" onclick="setQuickAmount(1000)">‚Ç∫1.000</button>
        <button class="quick-btn" onclick="setQuickAmount(5000)">‚Ç∫5.000</button>
        <button class="quick-btn" onclick="setQuickAmount(10000)">‚Ç∫10.000</button>
      </div>
      
      <label>veya Manuel Gir</label>
      <input type="number" id="qAmount" placeholder="0">
      
      <button class="btn btn-primary" onclick="addTransaction()" style="margin-top:15px">
        üíæ Kaydet ve Ekle
      </button>
    </div>

    <!-- Transactions -->
    <div class="card">
      <div class="card-header">
        <div class="card-title">üìã Son ƒ∞≈ülemler</div>
        <div class="card-action" onclick="showScreen('transactions')">T√ºm√º ‚Üí</div>
      </div>
      <div id="transactionList"></div>
    </div>
  </div>
</div>

<!-- Calendar Screen -->
<div id="calendar" class="screen">
  <div class="header">
    <div class="logo">üìÖ Takvim</div>
  </div>
  <div class="content">
    <div class="card">
      <div class="card-header">
        <button class="btn-outline" onclick="changeMonth(-1)" style="width:auto;padding:10px 20px">‚óÄ</button>
        <div class="card-title" id="calendarMonth">Ocak 2026</div>
        <button class="btn-outline" onclick="changeMonth(1)" style="width:auto;padding:10px 20px">‚ñ∂</button>
      </div>
      <div class="calendar" id="calendarGrid"></div>
    </div>
  </div>
</div>

<!-- Goals Screen -->
<div id="goals" class="screen">
  <div class="header">
    <div class="logo">üéØ Hedeflerim</div>
  </div>
  <div class="content">
    <div id="goalsList"></div>
    <button class="btn btn-primary" onclick="showAddGoal()">‚ûï Yeni Hedef Ekle</button>
  </div>
</div>

<!-- Settings -->
<div id="settings" class="screen">
  <div class="header">
    <div class="logo">‚öôÔ∏è Ayarlar</div>
  </div>
  <div class="content">
    <!-- Notifications Settings -->
    <div class="card">
      <div class="card-title">üîî Bildirim Ayarlarƒ±</div>
      
      <div style="background:var(--bg);padding:15px;border-radius:12px;margin-bottom:15px">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:15px">
          <div>
            <div style="font-weight:600;margin-bottom:4px">üìä G√ºnl√ºk √ñzet</div>
            <div style="font-size:13px;color:var(--text-dim)">Her ak≈üam 20:00'de</div>
          </div>
          <label class="theme-switch">
            <input type="checkbox" id="dailySummaryToggle" onchange="toggleNotification('dailySummary')">
            <span class="slider"></span>
          </label>
        </div>
        
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:15px">
          <div>
            <div style="font-weight:600;margin-bottom:4px">‚òï Sabah Hatƒ±rlatƒ±cƒ±sƒ±</div>
            <div style="font-size:13px;color:var(--text-dim)">Her sabah 09:00'da</div>
          </div>
          <label class="theme-switch">
            <input type="checkbox" id="morningReminderToggle" onchange="toggleNotification('morningReminder')">
            <span class="slider"></span>
          </label>
        </div>
        
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:15px">
          <div>
            <div style="font-weight:600;margin-bottom:4px">üçΩÔ∏è √ñƒüle Hatƒ±rlatƒ±cƒ±sƒ±</div>
            <div style="font-size:13px;color:var(--text-dim)">Her g√ºn 12:30'da</div>
          </div>
          <label class="theme-switch">
            <input type="checkbox" id="lunchReminderToggle" onchange="toggleNotification('lunchReminder')">
            <span class="slider"></span>
          </label>
        </div>
        
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:15px">
          <div>
            <div style="font-weight:600;margin-bottom:4px">üåô Ak≈üam Hatƒ±rlatƒ±cƒ±sƒ±</div>
            <div style="font-size:13px;color:var(--text-dim)">Her ak≈üam 21:00'de</div>
          </div>
          <label class="theme-switch">
            <input type="checkbox" id="eveningReminderToggle" onchange="toggleNotification('eveningReminder')">
            <span class="slider"></span>
          </label>
        </div>
        
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:15px">
          <div>
            <div style="font-weight:600;margin-bottom:4px">üí∞ B√ºt√ße Uyarƒ±larƒ±</div>
            <div style="font-size:13px;color:var(--text-dim)">Limit a≈üƒ±mlarƒ±nda</div>
          </div>
          <label class="theme-switch">
            <input type="checkbox" id="budgetAlertsToggle" checked onchange="toggleNotification('budgetAlerts')">
            <span class="slider"></span>
          </label>
        </div>
        
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div style="font-weight:600;margin-bottom:4px">üî• Streak Uyarƒ±larƒ±</div>
            <div style="font-size:13px;color:var(--text-dim)">Streak kaybetmeden √∂nce</div>
          </div>
          <label class="theme-switch">
            <input type="checkbox" id="streakAlertsToggle" checked onchange="toggleNotification('streakAlerts')">
            <span class="slider"></span>
          </label>
        </div>
      </div>
      
      <button class="btn btn-primary" onclick="requestNotificationPermission()">
        üîî Bildirimleri Etkinle≈ütir
      </button>
      
      <button class="btn btn-outline" onclick="testNotification()" style="margin-top:10px">
        ‚úÖ Test Bildirimi G√∂nder
      </button>
      
      <div style="margin-top:15px;padding:12px;background:var(--bg);border-radius:10px;font-size:13px;color:var(--text-dim)">
        üí° <strong>ƒ∞pucu:</strong> Bildirimlerin √ßalƒ±≈ümasƒ± i√ßin tarayƒ±cƒ± izni gereklidir. ƒ∞lk kullanƒ±mda "ƒ∞zin Ver" butonuna tƒ±klayƒ±n.
      </div>
    </div>

    <!-- Theme Selection -->
    <div class="card">
      <div class="card-title">üé® Tema Se√ßimi</div>
      <div class="theme-options">
        <div class="theme-option theme-default selected" onclick="changeTheme('default')"></div>
        <div class="theme-option theme-blue" onclick="changeTheme('blue')"></div>
        <div class="theme-option theme-green" onclick="changeTheme('green')"></div>
        <div class="theme-option theme-red" onclick="changeTheme('red')"></div>
        <div class="theme-option theme-purple" onclick="changeTheme('purple')"></div>
      </div>
    </div>

    <!-- Security -->
    <div class="card">
      <div class="card-title">üîê G√ºvenlik</div>
      <button class="btn btn-primary" onclick="setPIN()">PIN Kodu Ayarla</button>
      <button class="btn btn-outline mt-1" onclick="removePIN()">PIN Kodunu Kaldƒ±r</button>
    </div>

    <!-- Account -->
    <div class="card">
      <div class="card-title">üë§ Hesap</div>
      <div style="padding:15px;background:var(--bg);border-radius:12px;margin-bottom:15px">
        <div style="font-size:14px;color:var(--text-dim);margin-bottom:4px">Kullanƒ±cƒ±</div>
        <div style="font-weight:700;font-size:16px" id="userName">-</div>
        <div style="font-size:13px;color:var(--text-dim);margin-top:4px" id="userEmail">-</div>
      </div>
      <button class="btn btn-warning" onclick="logout()">üîÑ Hesap Deƒüi≈ütir</button>
      <button class="btn btn-danger" onclick="deleteAccount()" style="margin-top:10px">üóëÔ∏è Hesabƒ± Sil</button>
    </div>

    <!-- Data Export -->
    <div class="card">
      <div class="card-title">üíæ Veri Y√∂netimi</div>
      <div class="grid-2">
        <button class="btn btn-success" onclick="exportData('json')">üìÑ JSON</button>
        <button class="btn btn-success" onclick="exportData('csv')">üìä CSV</button>
        <button class="btn btn-warning" onclick="exportPDF()">üìï PDF</button>
        <button class="btn btn-warning" onclick="importData()">üì• Y√ºkle</button>
      </div>
      <input type="file" id="importFile" style="display:none" accept=".json" onchange="handleImport(event)">
    </div>
  </div>
</div>

<!-- Bottom Nav -->
<div class="bottom-nav">
  <div class="nav-item active" onclick="showScreen('home')">
    <div class="nav-icon">üè†</div>
    <div>Ana Sayfa</div>
  </div>
  <div class="nav-item" onclick="showScreen('calendar')">
    <div class="nav-icon">üìÖ</div>
    <div>Takvim</div>
  </div>
  <div class="nav-item" onclick="showScreen('goals')">
    <div class="nav-icon">üéØ</div>
    <div>Hedefler</div>
  </div>
  <div class="nav-item" onclick="showScreen('settings')">
    <div class="nav-icon">‚öôÔ∏è</div>
    <div>Ayarlar</div>
  </div>
</div>

<!-- FAB -->
<button class="fab" onclick="setTransactionType('expense');document.getElementById('qDesc').focus()">+</button>

<!-- Achievements Modal -->
<div class="modal" id="achievementsModal">
  <div class="modal-content">
    <div class="modal-header">
      <div class="modal-title">üèÜ Ba≈üarƒ±mlar</div>
      <button class="close-btn" onclick="closeModal('achievementsModal')">‚úï</button>
    </div>
    <div class="achievements" id="achievementsList"></div>
  </div>
</div>

</div>

<script>
// Data
let currentUser=JSON.parse(localStorage.getItem('paraizi_user')||'null');
let data=JSON.parse(localStorage.getItem('paraizi_mega')||'[]');
let goals=JSON.parse(localStorage.getItem('paraizi_goals')||'[]');
let settings=JSON.parse(localStorage.getItem('paraizi_settings')||'{"theme":"default","pin":"","lang":"tr"}');
let achievements=JSON.parse(localStorage.getItem('paraizi_achievements')||'[]');
let notifications=JSON.parse(localStorage.getItem('paraizi_notifications')||'{"dailySummary":false,"morningReminder":false,"lunchReminder":false,"eveningReminder":false,"budgetAlerts":true,"streakAlerts":true}');

let currentType='expense';
let selectedCategory='Market';
let currentMonth=new Date();
let pin='';
let cryptoPrices={};
let authMode='login';
let notificationInterval=null;

const categories={
  expense:[
    {name:'Market',icon:'üõí'},
    {name:'Ula≈üƒ±m',icon:'üöó'},
    {name:'Faturalar',icon:'‚ö°'},
    {name:'Eƒülence',icon:'üé¨'},
    {name:'Saƒülƒ±k',icon:'üè•'},
    {name:'Kƒ±yafet',icon:'üëï'},
    {name:'Teknoloji',icon:'üíª'},
    {name:'Yemek',icon:'üçî'},
    {name:'Diƒüer',icon:'üìå'}
  ],
  income:[
    {name:'Maa≈ü',icon:'üí∞'},
    {name:'Freelance',icon:'üíº'},
    {name:'Yatƒ±rƒ±m',icon:'üìà'},
    {name:'Ek Gelir',icon:'üíµ'},
    {name:'Hediye',icon:'üéÅ'},
    {name:'Diƒüer',icon:'üìå'}
  ]
};

const achievementDefs=[
  {id:'first',name:'ƒ∞lk Adƒ±m',icon:'üéØ',desc:'ƒ∞lk i≈ülemi ekle',check:()=>data.length>=1},
  {id:'week',name:'7 G√ºn',icon:'üìÖ',desc:'7 g√ºn √ºst √ºste kayƒ±t',check:()=>calculateStreak()>=7},
  {id:'month',name:'Bir Ay',icon:'üìÜ',desc:'30 g√ºn kayƒ±t',check:()=>calculateStreak()>=30},
  {id:'saver',name:'Tasarruf√ßu',icon:'üí∞',desc:'10.000‚Ç∫ biriktir',check:()=>calculateBalance()>=10000},
  {id:'organized',name:'D√ºzenli',icon:'üìä',desc:'50 i≈ülem ekle',check:()=>data.length>=50},
  {id:'goal',name:'Hedef Master',icon:'üéØ',desc:'Bir hedefi tamamla',check:()=>goals.some(g=>g.current>=g.target)}
];

function switchTab(mode){
  authMode=mode;
  document.getElementById('loginTab').classList.toggle('active',mode=='login');
  document.getElementById('registerTab').classList.toggle('active',mode=='register');
  
  const nameInput=document.getElementById('loginName');
  const btn=document.querySelector('.login-btn');
  
  if(mode=='register'){
    nameInput.style.display='block';
    btn.textContent='Kayƒ±t Ol';
  }else{
    nameInput.style.display='none';
    btn.textContent='Giri≈ü Yap';
  }
}

function handleAuth(){
  const email=document.getElementById('loginEmail').value;
  const password=document.getElementById('loginPassword').value;
  const name=document.getElementById('loginName').value;
  
  if(!email||!password){
    showNotif('‚ö†Ô∏è L√ºtfen t√ºm alanlarƒ± doldurun!','warning');
    return;
  }
  
  if(authMode=='register'){
    if(!name){
      showNotif('‚ö†Ô∏è L√ºtfen adƒ±nƒ±zƒ± girin!','warning');
      return;
    }
    
    // Kayƒ±t
    currentUser={
      name,
      email,
      password,
      joinDate:new Date().toISOString()
    };
    
    localStorage.setItem('paraizi_user',JSON.stringify(currentUser));
    showNotif('‚úÖ Kayƒ±t ba≈üarƒ±lƒ±! Ho≈ü geldiniz '+name+'!','success');
    closeLoginScreen();
  }else{
    // Giri≈ü
    const savedUser=JSON.parse(localStorage.getItem('paraizi_user')||'null');
    
    if(savedUser&&savedUser.email==email&&savedUser.password==password){
      currentUser=savedUser;
      showNotif('‚úÖ Ho≈ü geldiniz '+savedUser.name+'!','success');
      closeLoginScreen();
    }else{
      showNotif('‚ùå E-posta veya ≈üifre hatalƒ±!','danger');
    }
  }
}

function skipLogin(){
  if(confirm('Misafir olarak devam etmek istediƒüinize emin misiniz? Verileriniz bu cihazda saklanacak.')){
    currentUser={
      name:'Misafir',
      email:'guest@paraizi.app',
      guest:true
    };
    localStorage.setItem('paraizi_user',JSON.stringify(currentUser));
    closeLoginScreen();
  }
}

function closeLoginScreen(){
  document.getElementById('loginScreen').style.display='none';
  
  // Check PIN
  if(settings.pin){
    document.getElementById('pinScreen').style.display='flex';
  }
}

function logout(){
  if(confirm('√áƒ±kƒ±≈ü yapmak istediƒüinize emin misiniz?\n\nVerileriniz silinmeyecek, sadece giri≈ü ekranƒ±na d√∂neceksiniz.')){
    // Don't remove user data, just show login screen
    document.getElementById('loginScreen').style.display='flex';
    showNotif('üëã G√∂r√º≈ümek √ºzere!','info');
  }
}

function deleteAccount(){
  if(confirm('HESABINIZI VE T√úM VERƒ∞LERƒ∞Nƒ∞Zƒ∞ KALICI OLARAK Sƒ∞LMEK ƒ∞STEDƒ∞ƒûƒ∞Nƒ∞ZE EMƒ∞N Mƒ∞Sƒ∞Nƒ∞Z?\n\nBu i≈ülem geri alƒ±namaz!')){
    if(confirm('SON UYARI! T√ºm i≈ülemler, hedefler ve ayarlar silinecek!')){
      localStorage.clear();
      location.reload();
    }
  }
}

function init(){
  // Check if user logged in
  if(!currentUser){
    // Show login screen
    document.getElementById('loginScreen').style.display='flex';
    return;
  }
  
  // User logged in - hide login screen immediately
  document.getElementById('loginScreen').style.display='none';
  
  // Check PIN
  if(settings.pin){
    document.getElementById('pinScreen').style.display='flex';
  }
  
  // Apply theme
  if(settings.theme!='default'){
    document.body.className=`theme-${settings.theme}`;
  }
  
  // Load notification settings
  loadNotificationSettings();
  
  // Start notification scheduler
  startNotificationScheduler();
  
  // Render
  render();
  loadCategories();
  checkAchievements();
  generateAIInsights();
  renderCalendar();
  renderGoals();
  
  // Daily check
  checkDailyStreak();
  
  // Update when coming online/offline
  window.addEventListener('online',()=>{
    showNotif('üåê ƒ∞nternet baƒülantƒ±sƒ± yeniden kuruldu!','success');
  });
  
  window.addEventListener('offline',()=>{
    showNotif('üì° ƒ∞nternet baƒülantƒ±sƒ± kesildi. Offline moddasƒ±nƒ±z.','warning');
  });
  
  // Show welcome message only on first login of the day
  const lastLogin=localStorage.getItem('paraizi_last_login');
  const today=new Date().toDateString();
  
  if(lastLogin!=today&&currentUser.name){
    setTimeout(()=>{
      showNotif('üëã Tekrar ho≈ü geldin '+currentUser.name+'!','info');
      localStorage.setItem('paraizi_last_login',today);
    },3000);
  }
}

function loadNotificationSettings(){
  document.getElementById('dailySummaryToggle').checked=notifications.dailySummary||false;
  document.getElementById('morningReminderToggle').checked=notifications.morningReminder||false;
  document.getElementById('lunchReminderToggle').checked=notifications.lunchReminder||false;
  document.getElementById('eveningReminderToggle').checked=notifications.eveningReminder||false;
  document.getElementById('budgetAlertsToggle').checked=notifications.budgetAlerts||true;
  document.getElementById('streakAlertsToggle').checked=notifications.streakAlerts||true;
}

function toggleNotification(type){
  notifications[type]=!notifications[type];
  localStorage.setItem('paraizi_notifications',JSON.stringify(notifications));
  showNotif('‚úÖ Bildirim ayarƒ± g√ºncellendi!','success');
  
  // Restart scheduler with new settings
  startNotificationScheduler();
}

function requestNotificationPermission(){
  if(!('Notification' in window)){
    showNotif('‚ùå Tarayƒ±cƒ±nƒ±z bildirimleri desteklemiyor!','danger');
    return;
  }
  
  Notification.requestPermission().then(permission=>{
    if(permission=='granted'){
      showNotif('‚úÖ Bildirimler etkinle≈ütirildi!','success');
      // Send a test notification
      sendNotification('üéâ Bildirimler Aktif!','Artƒ±k g√ºnl√ºk hatƒ±rlatƒ±cƒ±lar alacaksƒ±nƒ±z.');
    }else if(permission=='denied'){
      showNotif('‚ùå Bildirim izni reddedildi. Tarayƒ±cƒ± ayarlarƒ±ndan izin verebilirsiniz.','warning');
    }else{
      showNotif('‚ö†Ô∏è Bildirim izni bekleniyor...','info');
    }
  });
}

function sendNotification(title,body,icon){
  if(!('Notification' in window)||Notification.permission!='granted')return;
  
  const notificationIcon=icon||'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"%3E%3Cdefs%3E%3ClinearGradient id="g" x1="0%25" y1="0%25" x2="100%25" y2="100%25"%3E%3Cstop offset="0%25" style="stop-color:%2340E0D0"/%3E%3Cstop offset="100%25" style="stop-color:%231E90FF"/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width="100" height="100" rx="20" fill="url(%23g)"/%3E%3Ccircle cx="50" cy="40" r="25" fill="white"/%3E%3Ctext x="50" y="50" text-anchor="middle" font-size="30" font-weight="bold" fill="%231E90FF"%3E‚Ç∫%3C/text%3E%3Crect x="35" y="65" width="6" height="15" fill="white"/%3E%3Crect x="44" y="60" width="6" height="20" fill="white"/%3E%3Crect x="53" y="55" width="6" height="25" fill="white"/%3E%3Crect x="62" y="70" width="6" height="10" fill="white"/%3E%3C/svg%3E';
  
  const notification=new Notification(title,{
    body:body,
    icon:notificationIcon,
    badge:notificationIcon,
    tag:'paraizi-notification',
    requireInteraction:false,
    silent:false
  });
  
  notification.onclick=function(){
    window.focus();
    this.close();
  };
  
  // Vibrate if supported
  if('vibrate' in navigator)navigator.vibrate([100,50,100]);
}

function testNotification(){
  if(!('Notification' in window)){
    showNotif('‚ùå Tarayƒ±cƒ±nƒ±z bildirimleri desteklemiyor!','danger');
    return;
  }
  
  if(Notification.permission!='granted'){
    showNotif('‚ö†Ô∏è √ñnce bildirimleri etkinle≈ütirin!','warning');
    return;
  }
  
  const thisMonth=data.filter(d=>new Date(d.date).getMonth()==new Date().getMonth());
  const income=thisMonth.filter(d=>d.type=='income').reduce((s,d)=>s+d.amount,0);
  const expense=thisMonth.filter(d=>d.type=='expense').reduce((s,d)=>s+d.amount,0);
  const balance=income-expense;
  
  sendNotification(
    'üí∞ Paraƒ∞zi - Test Bildirimi',
    `Mevcut bakiyeniz: ‚Ç∫${balance.toLocaleString('tr')}\nBu ay ${thisMonth.length} i≈ülem yaptƒ±nƒ±z.`
  );
  
  showNotif('üì± Test bildirimi g√∂nderildi!','success');
}

function startNotificationScheduler(){
  // Clear existing interval
  if(notificationInterval){
    clearInterval(notificationInterval);
  }
  
  // Check every minute for scheduled notifications
  notificationInterval=setInterval(()=>{
    const now=new Date();
    const hour=now.getHours();
    const minute=now.getMinutes();
    const timeKey=hour+':'+minute;
    
    // Morning Reminder - 09:00
    if(notifications.morningReminder&&hour==9&&minute==0){
      const lastCheck=localStorage.getItem('paraizi_morning_check');
      const today=now.toDateString();
      if(lastCheck!=today){
        sendNotification(
          '‚òï G√ºnaydƒ±n!',
          'Bug√ºn harcamalarƒ±nƒ±zƒ± kaydetmeyi unutmayƒ±n! Streak: '+calculateStreak()+' g√ºn üî•'
        );
        localStorage.setItem('paraizi_morning_check',today);
      }
    }
    
    // Lunch Reminder - 12:30
    if(notifications.lunchReminder&&hour==12&&minute==30){
      const lastCheck=localStorage.getItem('paraizi_lunch_check');
      const today=now.toDateString();
      if(lastCheck!=today){
        sendNotification(
          'üçΩÔ∏è √ñƒüle Vakti!',
          'Yemek masrafƒ±nƒ±zƒ± kaydetmeyi unutmayƒ±n!'
        );
        localStorage.setItem('paraizi_lunch_check',today);
      }
    }
    
    // Evening Reminder - 21:00
    if(notifications.eveningReminder&&hour==21&&minute==0){
      const lastCheck=localStorage.getItem('paraizi_evening_check');
      const today=now.toDateString();
      if(lastCheck!=today){
        const todayTrans=data.filter(d=>new Date(d.date).toDateString()==today);
        if(todayTrans.length==0){
          sendNotification(
            'üåô Ak≈üam Hatƒ±rlatƒ±cƒ±sƒ±',
            'Bug√ºn hen√ºz i≈ülem eklemediniz. Streak\'inizi kaybetmeyin! üî•'
          );
        }
        localStorage.setItem('paraizi_evening_check',today);
      }
    }
    
    // Daily Summary - 20:00
    if(notifications.dailySummary&&hour==20&&minute==0){
      const lastCheck=localStorage.getItem('paraizi_daily_summary');
      const today=now.toDateString();
      if(lastCheck!=today){
        const todayTrans=data.filter(d=>new Date(d.date).toDateString()==today);
        const todayExpense=todayTrans.filter(d=>d.type=='expense').reduce((s,d)=>s+d.amount,0);
        
        sendNotification(
          'üìä G√ºnl√ºk √ñzet',
          `Bug√ºn ${todayTrans.length} i≈ülem yaptƒ±nƒ±z.\nToplam gider: ‚Ç∫${todayExpense.toLocaleString('tr')}`
        );
        localStorage.setItem('paraizi_daily_summary',today);
      }
    }
    
    // Streak Alert - 22:00
    if(notifications.streakAlerts&&hour==22&&minute==0){
      const lastCheck=localStorage.getItem('paraizi_streak_check');
      const today=now.toDateString();
      if(lastCheck!=today){
        const todayTrans=data.filter(d=>new Date(d.date).toDateString()==today);
        if(todayTrans.length==0&&calculateStreak()>0){
          sendNotification(
            'üî• Streak Uyarƒ±sƒ±!',
            `${calculateStreak()} g√ºnl√ºk streak\'inizi kaybetmek √ºzeresiniz! Hemen bir i≈ülem ekleyin!`
          );
        }
        localStorage.setItem('paraizi_streak_check',today);
      }
    }
    
  },60000); // Check every minute
}

function checkBudgetNotification(){
  if(!notifications.budgetAlerts)return;
  
  const thisMonth=data.filter(d=>new Date(d.date).getMonth()==new Date().getMonth());
  const expense=thisMonth.filter(d=>d.type=='expense').reduce((s,d)=>s+d.amount,0);
  const budget=settings.budget||50000;
  const percentage=(expense/budget)*100;
  
  const lastAlert=localStorage.getItem('paraizi_budget_alert');
  const today=new Date().toDateString();
  
  if(percentage>=90&&lastAlert!=today){
    sendNotification(
      '‚ö†Ô∏è B√ºt√ße Uyarƒ±sƒ±!',
      `Aylƒ±k b√ºt√ßenizin %${Math.round(percentage)}\'ini kullandƒ±nƒ±z!\nKalan: ‚Ç∫${(budget-expense).toLocaleString('tr')}`
    );
    localStorage.setItem('paraizi_budget_alert',today);
  }
}

function showScreen(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
  event.target.closest('.nav-item').classList.add('active');
  
  if(id=='calendar')renderCalendar();
  if(id=='goals')renderGoals();
}

function setTransactionType(type){
  currentType=type;
  loadCategories();
  showNotif(type=='income'?'üìà Gelir modu':'üìâ Gider modu','info');
}

function loadCategories(){
  const cats=categories[currentType];
  document.getElementById('categoryGrid').innerHTML=cats.map(c=>`
    <div class="category-btn ${selectedCategory==c.name?'selected':''}" onclick="selectCategory('${c.name}')">
      <div class="category-icon">${c.icon}</div>
      <div class="category-name">${c.name}</div>
    </div>
  `).join('');
}

function selectCategory(cat){
  selectedCategory=cat;
  loadCategories();
}

function setQuickAmount(amt){
  document.getElementById('qAmount').value=amt;
  document.querySelectorAll('.quick-btn').forEach(b=>b.classList.remove('selected'));
  event.target.classList.add('selected');
}

function addTransaction(){
  const desc=document.getElementById('qDesc').value;
  const amount=parseFloat(document.getElementById('qAmount').value);
  
  if(!desc||!amount){
    showNotif('‚ö†Ô∏è L√ºtfen t√ºm alanlarƒ± doldurun!','warning');
    return;
  }
  
  const trans={
    id:Date.now(),
    type:currentType,
    desc,
    cat:selectedCategory,
    amount,
    date:new Date().toISOString()
  };
  
  data.unshift(trans);
  localStorage.setItem('paraizi_mega',JSON.stringify(data));
  
  document.getElementById('qDesc').value='';
  document.getElementById('qAmount').value='';
  document.querySelectorAll('.quick-btn').forEach(b=>b.classList.remove('selected'));
  
  render();
  checkAchievements();
  generateAIInsights();
  
  // Check budget after adding expense
  if(currentType=='expense'){
    checkBudgetNotification();
  }
  
  showNotif('‚úÖ ƒ∞≈ülem eklendi!','success');
  
  // Vibrate
  if('vibrate' in navigator)navigator.vibrate(50);
}

function render(){
  const thisMonth=data.filter(d=>new Date(d.date).getMonth()==new Date().getMonth());
  const income=thisMonth.filter(d=>d.type=='income').reduce((s,d)=>s+d.amount,0);
  const expense=thisMonth.filter(d=>d.type=='expense').reduce((s,d)=>s+d.amount,0);
  
  document.getElementById('totalBalance').textContent='‚Ç∫'+(income-expense).toLocaleString('tr');
  document.getElementById('monthIncome').textContent='‚Ç∫'+income.toLocaleString('tr');
  document.getElementById('monthExpense').textContent='‚Ç∫'+expense.toLocaleString('tr');
  document.getElementById('streakDays').textContent=calculateStreak();
  document.getElementById('userLevel').textContent=Math.floor(data.length/10)+1;
  
  // Update user info
  if(currentUser){
    if(document.getElementById('userName'))document.getElementById('userName').textContent=currentUser.name||'Misafir';
    if(document.getElementById('userEmail'))document.getElementById('userEmail').textContent=currentUser.email||'-';
  }
  
  document.getElementById('transactionList').innerHTML=data.slice(0,5).map(t=>{
    const cat=categories[t.type].find(c=>c.name==t.cat)||{icon:'üìå'};
    return `
      <div class="transaction">
        <div class="transaction-icon" style="background:${t.type=='income'?'#DCFCE7':'#FEE2E2'}">${cat.icon}</div>
        <div class="transaction-info">
          <div class="transaction-name">${t.desc}</div>
          <div class="transaction-meta">${t.cat} ‚Ä¢ ${new Date(t.date).toLocaleDateString('tr')}</div>
        </div>
        <div class="transaction-amount ${t.type}">
          ${t.type=='income'?'+':'-'}‚Ç∫${t.amount.toLocaleString('tr')}
        </div>
      </div>
    `;
  }).join('')||'<p class="text-center" style="color:var(--text-dim);padding:40px">Hen√ºz i≈ülem yok</p>';
}

function calculateBalance(){
  const income=data.filter(d=>d.type=='income').reduce((s,d)=>s+d.amount,0);
  const expense=data.filter(d=>d.type=='expense').reduce((s,d)=>s+d.amount,0);
  return income-expense;
}

function calculateStreak(){
  if(data.length==0)return 0;
  
  let streak=0;
  let checkDate=new Date();
  checkDate.setHours(0,0,0,0);
  
  while(true){
    const hasTransaction=data.some(d=>{
      const transDate=new Date(d.date);
      transDate.setHours(0,0,0,0);
      return transDate.getTime()==checkDate.getTime();
    });
    
    if(!hasTransaction)break;
    streak++;
    checkDate.setDate(checkDate.getDate()-1);
  }
  
  return streak;
}

function checkDailyStreak(){
  const today=new Date().toDateString();
  const lastCheck=localStorage.getItem('paraizi_last_check');
  
  if(lastCheck!=today){
    localStorage.setItem('paraizi_last_check',today);
    const hasToday=data.some(d=>new Date(d.date).toDateString()==today);
    if(!hasToday){
      showNotif('üí° Bug√ºn hen√ºz i≈ülem eklemediniz! Streak\'inizi kaybetmeyin!','info');
    }
  }
}

function checkAchievements(){
  let newUnlocked=false;
  
  achievementDefs.forEach(a=>{
    if(!achievements.includes(a.id)&&a.check()){
      achievements.push(a.id);
      newUnlocked=true;
      showNotif(`üèÜ Yeni Ba≈üarƒ±m: ${a.name}!`,'success');
      if('vibrate' in navigator)navigator.vibrate([100,50,100]);
    }
  });
  
  if(newUnlocked){
    localStorage.setItem('paraizi_achievements',JSON.stringify(achievements));
    document.getElementById('achievementDot').style.display='block';
  }
}

function showAchievements(){
  document.getElementById('achievementsList').innerHTML=achievementDefs.map(a=>`
    <div class="achievement ${achievements.includes(a.id)?'unlocked':''}">
      <div class="achievement-icon">${a.icon}</div>
      <div class="achievement-name">${a.name}</div>
    </div>
  `).join('');
  
  document.getElementById('achievementsModal').classList.add('show');
  document.getElementById('achievementDot').style.display='none';
}

function generateAIInsights(){
  const thisMonth=data.filter(d=>new Date(d.date).getMonth()==new Date().getMonth());
  const expenses=thisMonth.filter(d=>d.type=='expense');
  
  let insights=[];
  
  if(expenses.length>0){
    const catMap={};
    expenses.forEach(e=>{catMap[e.cat]=(catMap[e.cat]||0)+e.amount});
    const topCat=Object.keys(catMap).sort((a,b)=>catMap[b]-catMap[a])[0];
    
    insights.push(`
      <div class="card" style="background:linear-gradient(135deg,#3B82F6,#2563EB);color:#fff;cursor:pointer">
        <div style="display:flex;align-items:center;gap:15px">
          <div style="font-size:48px">ü§ñ</div>
          <div style="flex:1">
            <div style="font-weight:700;margin-bottom:8px">AI √ñnerisi</div>
            <div style="font-size:14px;opacity:0.9">Bu ay en √ßok ${topCat} kategorisinde harcama yaptƒ±nƒ±z (‚Ç∫${catMap[topCat].toLocaleString('tr')}). Limit belirlemeyi d√º≈ü√ºn√ºn!</div>
          </div>
        </div>
      </div>
    `);
  }
  
  document.getElementById('aiInsights').innerHTML=insights.join('');
}

function renderCalendar(){
  const year=currentMonth.getFullYear();
  const month=currentMonth.getMonth();
  const monthName=currentMonth.toLocaleDateString('tr',{month:'long',year:'numeric'});
  
  document.getElementById('calendarMonth').textContent=monthName;
  
  const firstDay=new Date(year,month,1).getDay();
  const daysInMonth=new Date(year,month+1,0).getDate();
  
  let html='';
  
  for(let i=0;i<firstDay;i++){
    html+='<div class="calendar-day" style="opacity:0.3"></div>';
  }
  
  for(let day=1;day<=daysInMonth;day++){
    const date=new Date(year,month,day);
    const dateStr=date.toDateString();
    const isToday=dateStr==new Date().toDateString();
    const dayTrans=data.filter(d=>new Date(d.date).toDateString()==dateStr);
    const dayTotal=dayTrans.reduce((s,d)=>s+(d.type=='income'?d.amount:-d.amount),0);
    
    html+=`
      <div class="calendar-day ${isToday?'today':''} ${dayTrans.length>0?'has-transactions':''}">
        <div class="day-number">${day}</div>
        ${dayTrans.length>0?`<div class="day-amount">‚Ç∫${Math.abs(dayTotal).toLocaleString('tr')}</div>`:''}
      </div>
    `;
  }
  
  document.getElementById('calendarGrid').innerHTML=html;
}

function changeMonth(dir){
  currentMonth.setMonth(currentMonth.getMonth()+dir);
  renderCalendar();
}

function renderGoals(){
  const thisMonth=data.filter(d=>new Date(d.date).getMonth()==new Date().getMonth());
  const income=thisMonth.filter(d=>d.type=='income').reduce((s,d)=>s+d.amount,0);
  const expense=thisMonth.filter(d=>d.type=='expense').reduce((s,d)=>s+d.amount,0);
  const saved=income-expense;
  
  document.getElementById('goalsList').innerHTML=`
    <div class="goal-card">
      <div class="goal-header">
        <div class="goal-title">Aylƒ±k Tasarruf</div>
        <div class="goal-icon">üéØ</div>
      </div>
      <div class="goal-amount">‚Ç∫${saved.toLocaleString('tr')}</div>
      <div class="goal-progress">
        <div class="goal-fill" style="width:${Math.min((saved/15000)*100,100)}%"></div>
      </div>
      <div class="goal-text">Hedef: ‚Ç∫15.000 ‚Ä¢ %${Math.min(Math.round((saved/15000)*100),100)} tamamlandƒ±</div>
    </div>
  `;
}

async function fetchCryptoPrices(){
  try{
    // Check if online
    if(!navigator.onLine){
      console.log('Offline - using cached prices');
      return;
    }
    
    // Fetch real crypto prices from CoinGecko API (Free)
    const cryptoResponse=await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum&vs_currencies=usd&include_24hr_change=true');
    const cryptoData=await cryptoResponse.json();
    
    // Fetch USD/TRY from free exchange rate API
    const forexResponse=await fetch('https://api.exchangerate-api.com/v4/latest/USD');
    const forexData=await forexResponse.json();
    const usdTry=forexData.rates.TRY;
    
    // Update prices object
    cryptoPrices={
      btc:{
        price:Math.round(cryptoData.bitcoin.usd),
        change:cryptoData.bitcoin.usd_24h_change.toFixed(1)
      },
      eth:{
        price:Math.round(cryptoData.ethereum.usd),
        change:cryptoData.ethereum.usd_24h_change.toFixed(1)
      },
      usdtry:{
        price:usdTry.toFixed(2),
        change:0.5 // Exchange rates change slowly
      },
      gold:{
        price:2850, // Gold price is harder to get free, using approximate
        change:0.8
      }
    };
    
    // Update UI
    updateCryptoTicker();
    
    // Cache the prices
    localStorage.setItem('paraizi_crypto_cache',JSON.stringify({
      data:cryptoPrices,
      timestamp:Date.now()
    }));
    
  }catch(error){
    console.log('Error fetching prices:',error);
    
    // Try to use cached data
    const cached=localStorage.getItem('paraizi_crypto_cache');
    if(cached){
      const cachedData=JSON.parse(cached);
      // Use cache if less than 5 minutes old
      if(Date.now()-cachedData.timestamp<300000){
        cryptoPrices=cachedData.data;
        updateCryptoTicker();
        console.log('Using cached crypto prices');
      }
    }
    
    // Fallback to approximate values if no cache
    if(!cryptoPrices.btc){
      cryptoPrices={
        btc:{price:95000,change:2.5},
        eth:{price:3400,change:-1.2},
        usdtry:{price:34.50,change:0.5},
        gold:{price:2850,change:0.8}
      };
      updateCryptoTicker();
    }
  }
}

function updateCryptoTicker(){
  // BTC
  const btcPrice=document.getElementById('btcPrice');
  const btcChange=document.getElementById('btcChange');
  if(btcPrice){
    btcPrice.textContent='$'+cryptoPrices.btc.price.toLocaleString('en');
    btcChange.textContent=(cryptoPrices.btc.change>0?'+':'')+cryptoPrices.btc.change+'%';
    btcChange.className='crypto-change '+(cryptoPrices.btc.change>0?'crypto-up':'crypto-down');
  }
  
  // ETH
  const ethPrice=document.getElementById('ethPrice');
  const ethChange=document.getElementById('ethChange');
  if(ethPrice){
    ethPrice.textContent='$'+cryptoPrices.eth.price.toLocaleString('en');
    ethChange.textContent=(cryptoPrices.eth.change>0?'+':'')+cryptoPrices.eth.change+'%';
    ethChange.className='crypto-change '+(cryptoPrices.eth.change>0?'crypto-up':'crypto-down');
  }
  
  // USD/TRY
  const usdPrice=document.getElementById('usdPrice');
  const usdChange=document.getElementById('usdChange');
  if(usdPrice){
    usdPrice.textContent='‚Ç∫'+cryptoPrices.usdtry.price;
    usdChange.textContent='+'+cryptoPrices.usdtry.change+'%';
    usdChange.className='crypto-change crypto-up';
  }
  
  // GOLD
  const goldPrice=document.getElementById('goldPrice');
  const goldChange=document.getElementById('goldChange');
  if(goldPrice){
    goldPrice.textContent='‚Ç∫'+cryptoPrices.gold.price.toLocaleString('tr');
    goldChange.textContent='+'+cryptoPrices.gold.change+'%';
    goldChange.className='crypto-change crypto-up';
  }
}

function changeTheme(theme){
  settings.theme=theme;
  localStorage.setItem('paraizi_settings',JSON.stringify(settings));
  
  document.body.className=theme=='default'?'':'theme-'+theme;
  
  document.querySelectorAll('.theme-option').forEach(t=>t.classList.remove('selected'));
  event.target.classList.add('selected');
  
  showNotif('üé® Tema deƒüi≈ütirildi!','success');
}

function setPIN(){
  const newPin=prompt('4 haneli PIN kodu olu≈üturun:');
  if(newPin&&newPin.length==4&&!isNaN(newPin)){
    settings.pin=newPin;
    localStorage.setItem('paraizi_settings',JSON.stringify(settings));
    showNotif('‚úÖ PIN kodu ayarlandƒ±!','success');
  }else{
    showNotif('‚ö†Ô∏è Ge√ßerli bir 4 haneli PIN girin!','warning');
  }
}

function removePIN(){
  if(confirm('PIN kodunu kaldƒ±rmak istediƒüinize emin misiniz?')){
    settings.pin='';
    localStorage.setItem('paraizi_settings',JSON.stringify(settings));
    showNotif('‚úÖ PIN kodu kaldƒ±rƒ±ldƒ±!','success');
  }
}

function pinInput(num){
  if(pin.length<4){
    pin+=num;
    document.getElementById('dot'+(pin.length)).classList.add('filled');
    if(pin.length==4){
      setTimeout(pinCheck,300);
    }
  }
}

function pinClear(){
  for(let i=1;i<=4;i++){
    document.getElementById('dot'+i).classList.remove('filled');
  }
  pin='';
}

function pinCheck(){
  if(pin==settings.pin){
    document.getElementById('pinScreen').classList.remove('show');
    pinClear();
    showNotif('‚úÖ Giri≈ü ba≈üarƒ±lƒ±!','success');
  }else{
    pinClear();
    showNotif('‚ùå Yanlƒ±≈ü PIN!','danger');
    if('vibrate' in navigator)navigator.vibrate([100,50,100,50,100]);
  }
}

function exportData(format){
  if(format=='json'){
    const blob=new Blob([JSON.stringify({data,goals,settings,achievements},null,2)],{type:'application/json'});
    download('paraizi_mega_'+new Date().toISOString().split('T')[0]+'.json',blob);
    showNotif('üìÑ JSON dosyasƒ± indirildi!','success');
  }else if(format=='csv'){
    let csv='Tarih,Tip,A√ßƒ±klama,Kategori,Tutar\n';
    data.forEach(d=>{
      csv+=`${new Date(d.date).toLocaleDateString('tr')},${d.type=='income'?'Gelir':'Gider'},${d.desc},${d.cat},${d.amount}\n`;
    });
    const blob=new Blob([csv],{type:'text/csv'});
    download('paraizi_mega_'+new Date().toISOString().split('T')[0]+'.csv',blob);
    showNotif('üìä CSV dosyasƒ± indirildi!','success');
  }
}

function exportPDF(){
  showNotif('üìï PDF √∂zelliƒüi yakƒ±nda gelecek!','info');
}

function importData(){
  document.getElementById('importFile').click();
}

function handleImport(e){
  const file=e.target.files[0];
  if(!file)return;
  
  const reader=new FileReader();
  reader.onload=function(e){
    try{
      const imported=JSON.parse(e.target.result);
      if(confirm('Mevcut veriler silinip yeni veriler y√ºklenecek. Emin misiniz?')){
        data=imported.data||[];
        goals=imported.goals||[];
        settings=imported.settings||settings;
        achievements=imported.achievements||[];
        
        localStorage.setItem('paraizi_mega',JSON.stringify(data));
        localStorage.setItem('paraizi_goals',JSON.stringify(goals));
        localStorage.setItem('paraizi_settings',JSON.stringify(settings));
        localStorage.setItem('paraizi_achievements',JSON.stringify(achievements));
        
        render();
        showNotif('‚úÖ Veriler y√ºklendi!','success');
      }
    }catch(err){
      showNotif('‚ùå Ge√ßersiz dosya!','danger');
    }
  };
  reader.readAsText(file);
}

function download(filename,blob){
  const url=URL.createObjectURL(blob);
  const a=document.createElement('a');
  a.href=url;
  a.download=filename;
  a.click();
}

function showNotif(msg,type='info'){
  const notif=document.createElement('div');
  notif.className='notification';
  notif.style.borderLeftColor=
    type=='success'?'var(--theme-success)':
    type=='warning'?'var(--theme-warning)':
    type=='danger'?'var(--theme-danger)':
    'var(--theme-info)';
  notif.innerHTML=`
    <div style="display:flex;align-items:center;gap:12px">
      <div style="flex:1;font-weight:600">${msg}</div>
      <button onclick="this.parentElement.parentElement.remove()" style="background:transparent;border:none;font-size:18px;cursor:pointer;color:var(--text-dim)">‚úï</button>
    </div>
  `;
  document.body.appendChild(notif);
  setTimeout(()=>notif.remove(),3000);
}

function showNotifications(){
  showNotif('üîî Bildirim merkezi yakƒ±nda!','info');
}

function showAddGoal(){
  showNotif('üéØ Hedef ekleme yakƒ±nda!','info');
}

function closeModal(id){
  document.getElementById(id).classList.remove('show');
}

// Demo data
if(data.length==0){
  data=[
    {id:1,type:'income',desc:'Aylƒ±k Maa≈ü',cat:'Maa≈ü',amount:45000,date:new Date().toISOString()},
    {id:2,type:'expense',desc:'Market',cat:'Market',amount:850,date:new Date().toISOString()},
    {id:3,type:'expense',desc:'Benzin',cat:'Ula≈üƒ±m',amount:500,date:new Date(Date.now()-86400000).toISOString()}
  ];
  localStorage.setItem('paraizi_mega',JSON.stringify(data));
}

init();
</script>
</body>
</html>
