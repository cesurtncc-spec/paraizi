<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#6366F1">
<link rel="manifest" href="manifest.json">
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='20' fill='%236366F1'/%3E%3Ctext x='50' y='70' text-anchor='middle' font-size='60'%3EğŸ’°%3C/text%3E%3C/svg%3E">
<title>ğŸ’° ParaÄ°zi</title>
<style>
:root{--p:#6366F1;--pd:#4F46E5;--s:#10B981;--d:#EF4444;--w:#F59E0B;--bg:#f1f5f9;--c:#fff;--t:#0f172a;--td:#64748b;--b:#e2e8f0}
body.dark{--p:#818CF8;--bg:#0f172a;--c:#1e293b;--t:#f1f5f9;--td:#94a3b8;--b:#334155}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:system-ui,sans-serif;background:var(--bg);color:var(--t);transition:all .3s;overflow:hidden}

/* Splash Screen */
.splash{position:fixed;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg,#6366F1 0%,#4F46E5 100%);display:flex;align-items:center;justify-content:center;z-index:9999;animation:fadeOut 0.5s 2s forwards}
.splash-content{text-align:center;animation:zoomIn 0.8s ease-out}
.splash-logo{font-size:120px;margin-bottom:20px;animation:bounce 1s infinite alternate}
.splash-title{font-size:48px;font-weight:800;color:#fff;letter-spacing:-1px;margin-bottom:10px;animation:slideUp 0.6s 0.3s both}
.splash-subtitle{font-size:16px;color:rgba(255,255,255,0.8);font-weight:500;animation:slideUp 0.6s 0.5s both}
.splash-loader{width:60px;height:4px;background:rgba(255,255,255,0.3);border-radius:2px;margin:30px auto 0;overflow:hidden;position:relative}
.splash-loader:after{content:'';position:absolute;top:0;left:0;width:30px;height:100%;background:#fff;border-radius:2px;animation:loading 1.5s infinite}

@keyframes fadeOut{to{opacity:0;visibility:hidden}}
@keyframes zoomIn{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}
@keyframes bounce{from{transform:translateY(0)}to{transform:translateY(-10px)}}
@keyframes slideUp{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}
@keyframes loading{0%{left:-30px}100%{left:100%}}

/* Ana Uygulama */
.app{opacity:0;animation:fadeIn 0.5s 2.5s forwards}
@keyframes fadeIn{to{opacity:1}}

body{overflow-y:auto}
.h{background:linear-gradient(135deg,var(--p),var(--pd));color:#fff;padding:30px 20px;text-align:center;position:relative}
.h .ic{position:absolute;top:15px;right:15px;display:flex;gap:10px}
.ib{background:rgba(255,255,255,.2);border:none;width:40px;height:40px;border-radius:10px;color:#fff;font-size:20px;cursor:pointer}
.bal{font-size:36px;font-weight:bold;margin:15px 0}
.st{display:flex;gap:20px;justify-content:center;margin-top:15px}
.stv{font-size:18px;font-weight:600;margin-top:5px}
.inc{color:var(--s)}
.exp{color:var(--d)}
.cn{padding:20px;max-width:600px;margin:0 auto;padding-bottom:80px}
.cd{background:var(--c);padding:20px;border-radius:12px;margin:15px 0;box-shadow:0 2px 8px rgba(0,0,0,.1)}
.btn{width:100%;padding:15px;border:none;border-radius:10px;font-size:16px;font-weight:600;cursor:pointer;margin:10px 0}
.bp{background:var(--p);color:#fff}
.bi{background:var(--s);color:#fff}
.be{background:var(--d);color:#fff}
.bw{background:var(--w);color:#fff}
input,select{width:100%;padding:12px;margin:8px 0;border:2px solid var(--b);border-radius:8px;font-size:15px;background:var(--c);color:var(--t)}
label{font-weight:600;display:block;margin-top:12px}
.tr{background:var(--bg);padding:15px;border-radius:8px;margin:10px 0;display:flex;justify-content:space-between;align-items:center}
.bn{position:fixed;bottom:0;left:0;right:0;background:var(--c);display:flex;border-top:1px solid var(--b);padding:10px 0;z-index:100}
.ni{flex:1;text-align:center;padding:8px;color:var(--td);font-size:12px;font-weight:600;cursor:pointer}
.ni.act{color:var(--p)}
.sc{display:none}
.sc.act{display:block}
.ch{width:100%;height:200px;margin:20px 0;position:relative}
.bar{display:inline-block;width:12%;margin:0 2%;background:var(--p);border-radius:4px 4px 0 0;vertical-align:bottom;position:relative}
.bl{position:absolute;bottom:-25px;left:0;right:0;text-align:center;font-size:11px;color:var(--td)}
.pg{width:100%;height:8px;background:var(--b);border-radius:10px;overflow:hidden;margin:10px 0}
.pf{height:100%;background:var(--p);transition:width .3s}
.fi{display:flex;justify-content:space-between;align-items:center;padding:12px;background:var(--bg);border-radius:8px;margin:8px 0}
.db{background:var(--d);color:#fff;border:none;padding:8px 15px;border-radius:6px;cursor:pointer;font-size:13px}
.sw{position:relative;display:inline-block;width:60px;height:30px}
.sw input{opacity:0;width:0;height:0}
.sl{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#ccc;transition:.4s;border-radius:30px}
.sl:before{position:absolute;content:"";height:22px;width:22px;left:4px;bottom:4px;background:#fff;transition:.4s;border-radius:50%}
input:checked+.sl{background:var(--p)}
input:checked+.sl:before{transform:translateX(30px)}
.md{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:1000;align-items:center;justify-content:center;padding:20px}
.md.sh{display:flex}
.mc{background:var(--c);border-radius:20px;padding:25px;max-width:400px;width:100%;max-height:80vh;overflow-y:auto}
.nt{position:fixed;top:20px;right:20px;background:var(--c);padding:15px 20px;border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,.2);z-index:2000;animation:si .3s;max-width:300px}
@keyframes si{from{transform:translateX(400px)}to{transform:translateX(0)}}
.ct{display:flex;flex-wrap:wrap;gap:10px;margin:20px 0}
.ci{flex:1;min-width:140px;background:var(--bg);padding:15px;border-radius:10px;text-align:center}
h3{margin-bottom:15px}
</style>
</head>
<body>

<!-- Splash Screen -->
<div class="splash">
  <div class="splash-content">
    <div class="splash-logo">ğŸ’°</div>
    <div class="splash-title">ParaÄ°zi</div>
    <div class="splash-subtitle">KiÅŸisel Finans YÃ¶neticisi</div>
    <div class="splash-loader"></div>
  </div>
</div>

<!-- Ana Uygulama -->
<div class="app">

<div id="home" class="sc act">
<div class="h">
  <div class="ic">
    <button class="ib" onclick="not()">ğŸ””</button>
    <button class="ib" onclick="sh('set')">âš™ï¸</button>
  </div>
  <div style="font-size:28px;font-weight:bold;margin-bottom:10px">ğŸ’° ParaÄ°zi Pro</div>
  <div class="bal" id="bal">â‚º0</div>
  <div class="st">
    <div><div style="font-size:12px;opacity:.9">Gelir</div><div class="stv inc" id="inc">â‚º0</div></div>
    <div><div style="font-size:12px;opacity:.9">Gider</div><div class="stv exp" id="exps">â‚º0</div></div>
  </div>
</div>

<div class="cn">
  <div class="cd">
    <h3>HÄ±zlÄ± Ä°ÅŸlem</h3>
    <label>Tip</label>
    <select id="ty" onchange="uc()">
      <option value="income">ğŸ’° Gelir</option>
      <option value="expense">ğŸ’¸ Gider</option>
    </select>
    <label>AÃ§Ä±klama</label>
    <input id="ds" placeholder="Ã–rn: MaaÅŸ">
    <label>Kategori</label>
    <select id="ct">
      <option>MaaÅŸ</option>
      <option>Freelance</option>
    </select>
    <label>Tutar (â‚º)</label>
    <input type="number" id="am" placeholder="0">
    <button class="btn bi" onclick="ad()">ğŸ’¾ Kaydet</button>
  </div>

  <div class="cd">
    <h3>Son Ä°ÅŸlemler</h3>
    <div id="ls"></div>
  </div>
</div>
</div>

<div id="rep" class="sc">
<div class="h">
  <div style="font-size:28px;font-weight:bold">ğŸ“Š Raporlar</div>
</div>
<div class="cn">
  <div class="cd">
    <h3>AylÄ±k Ã–zet</h3>
    <p>Toplam Ä°ÅŸlem: <strong id="tt">0</strong></p>
    <p>Ortalama GÃ¼nlÃ¼k: <strong id="avg">â‚º0</strong></p>
    <p>En Ã‡ok: <strong id="top">-</strong></p>
  </div>

  <div class="cd">
    <h3>Kategoriler</h3>
    <div id="cch" class="ct"></div>
  </div>

  <div class="cd">
    <h3>Son 7 GÃ¼n</h3>
    <div class="ch" id="wk"></div>
  </div>
</div>
</div>

<div id="fx" class="sc">
<div class="h">
  <div style="font-size:28px;font-weight:bold">ğŸ“‹ Sabit Gider</div>
</div>
<div class="cn">
  <div class="cd">
    <h3>Sabit Giderlerim</h3>
    <div id="fl"></div>
    <button class="btn bp" onclick="af()">â• Ekle</button>
  </div>

  <div class="cd">
    <h3>Ã–zet</h3>
    <p>Toplam: <strong id="tf">â‚º0</strong></p>
    <p>GÃ¼nlÃ¼k Limit: <strong id="dl">â‚º0</strong></p>
    <div class="pg"><div class="pf" id="lp" style="width:0%"></div></div>
  </div>
</div>
</div>

<div id="set" class="sc">
<div class="h">
  <div style="font-size:28px;font-weight:bold">âš™ï¸ Ayarlar</div>
</div>
<div class="cn">
  <div class="cd">
    <h3>GÃ¶rÃ¼nÃ¼m</h3>
    <div style="display:flex;justify-content:space-between;margin:15px 0">
      <span>ğŸŒ™ KaranlÄ±k Tema</span>
      <label class="sw"><input type="checkbox" id="th" onchange="tt()"><span class="sl"></span></label>
    </div>
  </div>

  <div class="cd">
    <h3>Bildirimler</h3>
    <div style="display:flex;justify-content:space-between;margin:15px 0">
      <span>ğŸ”” GÃ¼nlÃ¼k HatÄ±rlatÄ±cÄ±</span>
      <label class="sw"><input type="checkbox" id="nt" onchange="tn()"><span class="sl"></span></label>
    </div>
  </div>

  <div class="cd">
    <h3>Veri</h3>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
      <button class="btn bp" onclick="exp('json')">ğŸ“„ JSON</button>
      <button class="btn bp" onclick="exp('csv')">ğŸ“Š CSV</button>
    </div>
    <button class="btn bw" onclick="imp()">ğŸ“¥ YÃ¼kle</button>
    <input type="file" id="if" style="display:none" accept=".json" onchange="hi(event)">
    <button class="btn be" onclick="cl()">ğŸ—‘ï¸ Sil</button>
  </div>
</div>
</div>

<div class="bn">
  <div class="ni act" onclick="sh('home')">ğŸ <br>Ana Sayfa</div>
  <div class="ni" onclick="sh('rep')">ğŸ“Š<br>Rapor</div>
  <div class="ni" onclick="sh('fx')">ğŸ“‹<br>Sabit</div>
  <div class="ni" onclick="sh('set')">âš™ï¸<br>Ayar</div>
</div>

<div class="md" id="fm">
<div class="mc">
  <h3>Yeni Sabit Gider</h3>
  <label>Ad</label>
  <input id="fn" placeholder="Ã–rn: Kira">
  <label>Tutar (â‚º)</label>
  <input type="number" id="fa" placeholder="0">
  <button class="btn bp" onclick="sv()">ğŸ’¾ Kaydet</button>
  <button class="btn" onclick="cm()" style="background:var(--bg)">Ä°ptal</button>
</div>
</div>

</div>

<script>
let d=JSON.parse(localStorage.getItem('p')||'[]');
let f=JSON.parse(localStorage.getItem('f')||'[]');
let s=JSON.parse(localStorage.getItem('s')||'{"t":"light","n":true}');

function sh(i){
  document.querySelectorAll('.sc').forEach(x=>x.classList.remove('act'));
  document.getElementById(i).classList.add('act');
  document.querySelectorAll('.ni').forEach(x=>x.classList.remove('act'));
  event.target.closest('.ni').classList.add('act');
  if(i=='rep')rr();
  if(i=='fx')rf();
}

function uc(){
  let t=document.getElementById('ty').value;
  document.getElementById('ct').innerHTML=t=='income'?'<option>MaaÅŸ</option><option>Freelance</option><option>YatÄ±rÄ±m</option>':'<option>Market</option><option>UlaÅŸÄ±m</option><option>Faturalar</option><option>EÄŸlence</option><option>SaÄŸlÄ±k</option>';
}

function ad(){
  let t=document.getElementById('ty').value;
  let ds=document.getElementById('ds').value;
  let ct=document.getElementById('ct').value;
  let am=parseFloat(document.getElementById('am').value);
  if(!ds||!am){sn('âš ï¸ LÃ¼tfen doldur!');return}
  d.unshift({type:t,desc:ds,cat:ct,amount:am,date:new Date().toISOString()});
  localStorage.setItem('p',JSON.stringify(d));
  r();
  document.getElementById('ds').value='';
  document.getElementById('am').value='';
  sn('âœ… Eklendi!');
}

function r(){
  let ic=d.filter(x=>x.type=='income').reduce((s,x)=>s+x.amount,0);
  let ex=d.filter(x=>x.type=='expense').reduce((s,x)=>s+x.amount,0);
  document.getElementById('inc').textContent='â‚º'+ic.toLocaleString('tr');
  document.getElementById('exps').textContent='â‚º'+ex.toLocaleString('tr');
  document.getElementById('bal').textContent='â‚º'+(ic-ex).toLocaleString('tr');
  document.getElementById('ls').innerHTML=d.slice(0,10).map((x,i)=>`
    <div class="tr">
      <div><strong>${x.desc}</strong><br><small>${x.cat}</small></div>
      <div style="text-align:right">
        <div style="font-weight:bold;font-size:16px" class="${x.type=='income'?'inc':'exp'}">${x.type=='income'?'+':'-'}â‚º${x.amount.toLocaleString('tr')}</div>
        <button onclick="de(${i})" style="background:transparent;border:none;color:var(--d);cursor:pointer;font-size:12px">ğŸ—‘ï¸</button>
      </div>
    </div>
  `).join('')||'<p style="text-align:center;color:var(--td);padding:20px">Ä°ÅŸlem yok</p>';
}

function de(i){
  if(confirm('Silmek istediÄŸinize emin misiniz?')){
    d.splice(i,1);
    localStorage.setItem('p',JSON.stringify(d));
    r();
    sn('ğŸ—‘ï¸ Silindi');
  }
}

function rr(){
  let ex=d.filter(x=>x.type=='expense');
  document.getElementById('tt').textContent=d.length;
  let avg=ex.length?ex.reduce((s,x)=>s+x.amount,0)/30:0;
  document.getElementById('avg').textContent='â‚º'+Math.round(avg).toLocaleString('tr');
  
  let cm={};
  ex.forEach(x=>{cm[x.cat]=(cm[x.cat]||0)+x.amount});
  let tc=Object.keys(cm).sort((a,b)=>cm[b]-cm[a])[0]||'-';
  document.getElementById('top').textContent=tc+(cm[tc]?' (â‚º'+cm[tc].toLocaleString('tr')+')':'');
  
  let ch='';
  let l7=[];
  for(let i=6;i>=0;i--){
    let dt=new Date();
    dt.setDate(dt.getDate()-i);
    let dd=ex.filter(x=>new Date(x.date).toDateString()==dt.toDateString());
    let to=dd.reduce((s,x)=>s+x.amount,0);
    l7.push({day:dt.toLocaleDateString('tr',{weekday:'short'}),amount:to});
  }
  let mx=Math.max(...l7.map(x=>x.amount),100);
  l7.forEach(x=>{
    let h=Math.max((x.amount/mx)*180,5);
    ch+=`<div class="bar" style="height:${h}px"><div class="bl">${x.day}<br>â‚º${x.amount}</div></div>`;
  });
  document.getElementById('wk').innerHTML=ch;
  
  let cch='';
  Object.keys(cm).forEach(c=>{
    let ic={'Market':'ğŸ›’','UlaÅŸÄ±m':'ğŸš—','Faturalar':'âš¡','EÄŸlence':'ğŸ¬','SaÄŸlÄ±k':'ğŸ¥'};
    cch+=`<div class="ci"><div style="font-size:30px;margin-bottom:8px">${ic[c]||'ğŸ“Œ'}</div><div style="font-size:13px;color:var(--td)">${c}</div><div style="font-size:18px;font-weight:bold;margin-top:5px" class="exp">â‚º${cm[c].toLocaleString('tr')}</div></div>`;
  });
  document.getElementById('cch').innerHTML=cch||'<p style="text-align:center;color:var(--td)">Veri yok</p>';
}

function rf(){
  let to=f.reduce((s,x)=>s+x.amount,0);
  document.getElementById('tf').textContent='â‚º'+to.toLocaleString('tr');
  
  let ic=d.filter(x=>x.type=='income').reduce((s,x)=>s+x.amount,0);
  let dl=(ic-to)/30;
  document.getElementById('dl').textContent='â‚º'+Math.round(dl).toLocaleString('tr');
  
  let td=d.filter(x=>x.type=='expense'&&new Date(x.date).toDateString()==new Date().toDateString()).reduce((s,x)=>s+x.amount,0);
  let pr=dl>0?Math.min((td/dl)*100,100):0;
  document.getElementById('lp').style.width=pr+'%';
  
  document.getElementById('fl').innerHTML=f.map((x,i)=>`
    <div class="fi">
      <div><strong>${x.name}</strong></div>
      <div style="display:flex;gap:10px;align-items:center">
        <span style="font-weight:bold">â‚º${x.amount.toLocaleString('tr')}</span>
        <button class="db" onclick="df(${i})">ğŸ—‘ï¸</button>
      </div>
    </div>
  `).join('')||'<p style="text-align:center;color:var(--td);padding:20px">Sabit gider yok</p>';
}

function af(){
  document.getElementById('fm').classList.add('sh');
}

function cm(){
  document.getElementById('fm').classList.remove('sh');
}

function sv(){
  let n=document.getElementById('fn').value;
  let a=parseFloat(document.getElementById('fa').value);
  if(!n||!a){sn('âš ï¸ Doldur!');return}
  f.push({name:n,amount:a});
  localStorage.setItem('f',JSON.stringify(f));
  rf();
  cm();
  document.getElementById('fn').value='';
  document.getElementById('fa').value='';
  sn('âœ… Eklendi!');
}

function df(i){
  if(confirm('Silmek istediÄŸinize emin misiniz?')){
    f.splice(i,1);
    localStorage.setItem('f',JSON.stringify(f));
    rf();
    sn('ğŸ—‘ï¸ Silindi');
  }
}

function tt(){
  let dk=document.getElementById('th').checked;
  document.body.classList.toggle('dark',dk);
  s.t=dk?'dark':'light';
  localStorage.setItem('s',JSON.stringify(s));
}

function tn(){
  s.n=document.getElementById('nt').checked;
  localStorage.setItem('s',JSON.stringify(s));
  if(s.n)sn('ğŸ”” AÃ§Ä±ldÄ±!');
}

function not(){
  sn('ğŸ”” Ayarlara gidin');
}

function exp(ft){
  if(ft=='json'){
    let b=new Blob([JSON.stringify({t:d,f,s},null,2)],{type:'application/json'});
    let u=URL.createObjectURL(b);
    let a=document.createElement('a');
    a.href=u;
    a.download='paraizi_'+new Date().toISOString().split('T')[0]+'.json';
    a.click();
    sn('ğŸ“„ Ä°ndirildi!');
  }else if(ft=='csv'){
    let c='Tarih,Tip,AÃ§Ä±klama,Kategori,Tutar\n';
    d.forEach(x=>{
      c+=`${new Date(x.date).toLocaleDateString('tr')},${x.type=='income'?'Gelir':'Gider'},${x.desc},${x.cat},${x.amount}\n`;
    });
    let b=new Blob([c],{type:'text/csv'});
    let u=URL.createObjectURL(b);
    let a=document.createElement('a');
    a.href=u;
    a.download='paraizi_'+new Date().toISOString().split('T')[0]+'.csv';
    a.click();
    sn('ğŸ“Š Ä°ndirildi!');
  }
}

function imp(){
  document.getElementById('if').click();
}

function hi(e){
  let fl=e.target.files[0];
  if(!fl)return;
  let rd=new FileReader();
  rd.onload=function(e){
    try{
      let im=JSON.parse(e.target.result);
      if(confirm('Mevcut veriler silinip yeni veriler yÃ¼klenecek?')){
        d=im.t||[];
        f=im.f||[];
        s=im.s||s;
        localStorage.setItem('p',JSON.stringify(d));
        localStorage.setItem('f',JSON.stringify(f));
        localStorage.setItem('s',JSON.stringify(s));
        r();
        sn('âœ… YÃ¼klendi!');
      }
    }catch(err){
      sn('âŒ GeÃ§ersiz!');
    }
  };
  rd.readAsText(fl);
}

function cl(){
  if(confirm('TÃœM VERÄ°LERÄ° SÄ°LMEK Ä°STEDÄ°ÄÄ°NÄ°ZE EMÄ°N MÄ°SÄ°NÄ°Z?')){
    if(confirm('Son kez soruyorum!')){
      localStorage.clear();
      location.reload();
    }
  }
}

function sn(m){
  let n=document.createElement('div');
  n.className='nt';
  n.innerHTML=`<div style="display:flex;align-items:center;gap:10px"><div style="flex:1">${m}</div><button onclick="this.parentElement.parentElement.remove()" style="background:transparent;border:none;font-size:18px;cursor:pointer">âœ•</button></div>`;
  document.body.appendChild(n);
  setTimeout(()=>n.remove(),3000);
}

if(d.length==0){
  d=[{type:'income',desc:'MaaÅŸ',cat:'MaaÅŸ',amount:45000,date:new Date().toISOString()},{type:'expense',desc:'Market',cat:'Market',amount:850,date:new Date().toISOString()}];
  localStorage.setItem('p',JSON.stringify(d));
}

if(s.t=='dark'){
  document.body.classList.add('dark');
  document.getElementById('th').checked=true;
}
document.getElementById('nt').checked=s.n;

r();

if('serviceWorker' in navigator){
  navigator.serviceWorker.register('sw.js').catch(()=>{});
}
</script>
</body>
</html>
